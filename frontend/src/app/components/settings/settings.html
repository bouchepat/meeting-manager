<div class="container py-4">
  <div class="row">
    <div class="col-lg-8">
      <!-- Recording Settings -->
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-mic me-2"></i>
            Recording Settings
          </h5>
        </div>
        <div class="card-body">
          <div class="setting-item d-flex justify-content-between align-items-center py-3">
            <div>
              <h6 class="mb-1">Enable Live Transcription</h6>
              <p class="text-muted small mb-0">Automatically transcribe audio during recording</p>
            </div>
            <div class="form-check form-switch">
              <input
                class="form-check-input"
                type="checkbox"
                id="enableTranscription"
                [checked]="settingsService.enableTranscription()"
                (change)="settingsService.enableTranscription.set(!settingsService.enableTranscription())">
            </div>
          </div>

          <hr class="my-0">

          <div class="setting-item d-flex justify-content-between align-items-center py-3">
            <div>
              <h6 class="mb-1">Auto-Save Recordings</h6>
              <p class="text-muted small mb-0">Automatically upload recordings when complete</p>
            </div>
            <div class="form-check form-switch">
              <input
                class="form-check-input"
                type="checkbox"
                id="autoSaveRecordings"
                [checked]="settingsService.autoSaveRecordings()"
                (change)="settingsService.autoSaveRecordings.set(!settingsService.autoSaveRecordings())">
            </div>
          </div>

          <hr class="my-0">

          <div class="setting-item py-3">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <div>
                <h6 class="mb-1">Audio Quality</h6>
                <p class="text-muted small mb-0">Higher quality uses more storage</p>
              </div>
            </div>
            <select
              class="form-select"
              [ngModel]="settingsService.audioQuality()"
              (ngModelChange)="settingsService.audioQuality.set($event)">
              <option value="low">Low (64 kbps)</option>
              <option value="medium">Medium (128 kbps)</option>
              <option value="high">High (256 kbps)</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Notification Settings -->
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-bell me-2"></i>
            Notifications
          </h5>
        </div>
        <div class="card-body">
          <div class="setting-item d-flex justify-content-between align-items-center py-3">
            <div>
              <h6 class="mb-1">Enable Notifications</h6>
              <p class="text-muted small mb-0">Receive notifications for completed recordings and updates</p>
            </div>
            <div class="form-check form-switch">
              <input
                class="form-check-input"
                type="checkbox"
                id="notificationsEnabled"
                [checked]="settingsService.notificationsEnabled()"
                (change)="settingsService.notificationsEnabled.set(!settingsService.notificationsEnabled())">
            </div>
          </div>
        </div>
      </div>

      <!-- Appearance Settings -->
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-palette me-2"></i>
            Appearance
          </h5>
        </div>
        <div class="card-body">
          <div class="setting-item d-flex justify-content-between align-items-center py-3">
            <div>
              <h6 class="mb-1">Dark Mode</h6>
              <p class="text-muted small mb-0">Use dark theme throughout the application</p>
            </div>
            <div class="form-check form-switch">
              <input
                class="form-check-input"
                type="checkbox"
                id="darkMode"
                [checked]="isDarkMode()"
                (change)="toggleDarkMode()">
            </div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="d-flex gap-2">
        <button class="btn btn-primary" (click)="saveSettings()" [disabled]="saving">
          @if (saving) {
            <span class="spinner-border spinner-border-sm me-1"></span>
            Saving...
          } @else {
            <i class="bi bi-check-lg me-1"></i>
            Save Settings
          }
        </button>
        <button class="btn btn-outline-secondary" (click)="resetSettings()" [disabled]="saving">
          <i class="bi bi-arrow-counterclockwise me-1"></i>
          Reset to Defaults
        </button>
      </div>
    </div>

    <!-- Sidebar Info -->
    <div class="col-lg-4">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-info-circle me-2"></i>
            About
          </h5>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <label class="form-label text-muted small">Application</label>
            <p class="mb-0">Meeting Manager</p>
          </div>
          <div class="mb-3">
            <label class="form-label text-muted small">Version</label>
            <p class="mb-0">1.0.0</p>
          </div>
          <div class="mb-3">
            <label class="form-label text-muted small">Frontend</label>
            <p class="mb-0">Angular 21</p>
          </div>
          <div>
            <label class="form-label text-muted small">Backend</label>
            <p class="mb-0">NestJS 11</p>
          </div>
        </div>
      </div>

      <div class="card mt-4">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-database me-2"></i>
            Storage
          </h5>
        </div>
        <div class="card-body">
          @if (loadingStorage()) {
            <div class="text-center py-3">
              <span class="spinner-border spinner-border-sm text-primary"></span>
              <span class="ms-2 text-muted">Loading...</span>
            </div>
          } @else if (storageStats(); as stats) {
            <div class="mb-3">
              <div class="d-flex justify-content-between mb-1">
                <span class="small">Used Storage</span>
                <span class="small text-muted">{{ formatBytes(stats.usedBytes) }}</span>
              </div>
              <div class="progress" style="height: 8px;">
                <div class="progress-bar bg-primary" role="progressbar" style="width: 100%"></div>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center">
              <small class="text-muted">Recordings with audio</small>
              <span class="badge bg-secondary">{{ stats.recordingCount }}</span>
            </div>
          } @else {
            <div class="mb-3">
              <div class="d-flex justify-content-between mb-1">
                <span class="small">Used Storage</span>
                <span class="small text-muted">0 B</span>
              </div>
              <div class="progress" style="height: 8px;">
                <div class="progress-bar" role="progressbar" style="width: 0%"></div>
              </div>
            </div>
            <small class="text-muted">No recordings yet</small>
          }
        </div>
      </div>
    </div>
  </div>
</div>
