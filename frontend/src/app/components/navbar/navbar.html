<nav class="navbar">
  <div class="navbar-left">
    <button class="sidebar-toggle" (click)="toggleSidebar()">
      <i class="bi bi-list"></i>
    </button>
    <h1 class="page-title">{{ pageTitle() }}</h1>
  </div>

  <div class="navbar-right">
    <!-- User Dropdown -->
    @if (user$ | async; as user) {
      <div ngbDropdown class="d-inline-block">
        <button class="user-dropdown" ngbDropdownToggle>
          <img
            [src]="user.photoURL || 'assets/default-avatar.png'"
            [alt]="user.displayName || 'User'"
            class="user-avatar"
            referrerpolicy="no-referrer"
            (error)="$event.target.src = 'assets/default-avatar.png'">
          <span class="user-name d-none d-md-inline">{{ user.displayName || 'User' }}</span>
        </button>
        <div ngbDropdownMenu class="dropdown-menu-end">
          <a ngbDropdownItem routerLink="/profile">
            <i class="bi bi-person me-2"></i>
            Profile
          </a>
          <a ngbDropdownItem routerLink="/settings">
            <i class="bi bi-gear me-2"></i>
            Settings
          </a>
          <div class="dropdown-divider"></div>
          <button ngbDropdownItem class="text-danger" (click)="signOut()">
            <i class="bi bi-box-arrow-right me-2"></i>
            Sign Out
          </button>
        </div>
      </div>
    } @else {
      <button class="btn btn-outline-primary btn-sm" (click)="signIn()">
        <i class="bi bi-google me-1"></i>
        Sign In
      </button>
    }
  </div>
</nav>
